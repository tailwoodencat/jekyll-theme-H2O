$(document).ready((function(){var e,a,t=$(".g-nav");if($("#menu-toggle").on("click",(function(e){t.slideToggle(200),$(document).on("click",(function(){t.slideUp(200)})),e.stopPropagation()})),t.on("click",(function(e){e.stopPropagation()})),$(window).width()>695){var n=$(".g-header"),o=n.outerHeight(),s=$(".g-logo"),r=t.find("a"),c=$(".g-banner").attr("data-theme"),i=$(document).scrollTop();$(document).scroll((function(){var e=$(this).scrollTop(),a="nav-"+c;e>o?(e>3*o&&n.addClass("headerUp"),n.css({"background-color":"rgba(255, 255, 255, .98)","box-shadow":"0 1px 12px rgba(0, 0, 0, .08)"}),s.css({background:"url("+document.URL+"assets/icons/logo_"+c+".svg) no-repeat center","background-size":"100% 100%"}),r.css("color","#666"),t.addClass(a)):(n.removeClass("headerUp"),n.css({"background-color":"transparent","box-shadow":"none"}),s.css({background:"url("+document.URL+"assets/icons/logo.svg) no-repeat center","background-size":"100% 100%"}),r.css("color","#fff"),t.removeClass(a)),i>e?n.addClass("headerDown"):n.removeClass("headerDown"),i=e}))}function l(){var e,a,t,n=$("#search_input"),o=$(".search_result");n.focus((function(){$(".icon-search").css("color","#3199DB"),o.show()})),n.keyup((e=this.autoComplete,a=a||120,function(){var n=this,o=arguments,s=function(){e.apply(n,o)};clearTimeout(t),t=setTimeout(s,a)})),$(document).click((function(e){"search_input"!==e.target.id&&"search_result"!==e.target.className&&"search_item"!==e.target.className&&($(".icon-search").css("color","#CAD3DC"),o.hide())}))}$(".read-next-item section").each((function(){var e=$(this).height(),a=$(".read-next-item").height();$(this).css("margin-top",(a-e)/2+"px"),$(this).fadeIn()})),$(".read-next-item img").each((function(){!function(e,a){e.width(),a.width();var t=e.height(),n=a.height();if(t<n){e.css({width:"auto",height:"100%"});var o=(e.width()-a.width())/2;e.css("margin-left","-"+o+"px")}else{var s=(n-t)/2;e.css("margin-top",s+"px")}e.fadeIn()}($(this),$(".read-next-item"))})),function(){for(var e=parseInt($("#total_pages").val()),a=parseInt($("#current_pages").val()),t=$("#base_url").val(),n="",o=a-3;o<a;o++)o>0&&1!==o?n+='<a href="'+t+"page"+o+'" class="page-link page-num">'+o+"</a>":1===o&&(n+='<a href="'+t+'" class="page-link page-num">'+o+"</a>");n+='<span class="page-link page-num active">'+a+"</span>";for(var s=a+1;s<=a+3;s++)s<=e&&(n+='<a href="'+t+"page"+s+'" class="page-link page-num">'+s+"</a>");$("#page-link-container").html(n)}(),l.prototype.autoComplete=function(){var e=this.value.toLowerCase();e.length?$(".icon-search").css("color","#3199DB"):$(".icon-search").css("color","#CAD3DC"),$.getJSON("../../search.json").done((function(a){var t="";for(var n in a){var o=a[n],s=o.title,r=o.tags;o.url;""!==e&&(s+r).toLowerCase().indexOf(e)>=0&&(t+='<a class="search_item" href="'+o.url+'">'+o.title+"</a>")}$(".search_result").html(t)}))},new l,"true"===$("#nm-switch").val()&&(e=$("body"),((a=(new Date).getHours())<=6||a>=18)&&e.addClass("night-mode")),$(".post-content").on("mouseup",(function(e){var a,t=window.getSelection();t.toString().length>=30&&(a=t,a+="\n\n著作权归作者所有。\n商业转载请联系作者获得授权,非商业转载请注明出处。\n原文: "+location.href,$(".post-content").on("copy",(function(e){(window.clipboardData||e.originalEvent.clipboardData).setData("text/plain",a),e.preventDefault()})))}))}));
$(document).ready((function(){var e=$(".g-nav");if($("#menu-toggle").on("click",(function(t){e.slideToggle(200),$(document).on("click",(function(){e.slideUp(200)})),t.stopPropagation()})),e.on("click",(function(e){e.stopPropagation()})),$(window).width()>695){var t=$(".g-header"),a=t.outerHeight(),o=$(".g-logo"),n=e.find("a"),s=$(".g-banner").attr("data-theme"),r=$(document).scrollTop(),c=$("#base_url").val();$(document).scroll((function(){var i=$(this).scrollTop(),l="nav-"+s;i>a?(i>3*a&&t.addClass("headerUp"),t.css({"background-color":"rgba(255, 255, 255, .98)","box-shadow":"0 1px 12px rgba(0, 0, 0, .08)"}),o.css({background:"url("+c+"/assets/icons/logo_"+s+".svg) no-repeat center","background-size":"100% 100%"}),n.css("color","#666"),e.addClass(l)):(t.removeClass("headerUp"),t.css({"background-color":"transparent","box-shadow":"none"}),o.css({background:"url("+c+"assets/icons/logo.svg) no-repeat center","background-size":"100% 100%"}),n.css("color","#fff"),e.removeClass(l)),r>i?t.addClass("headerDown"):t.removeClass("headerDown"),r=i}))}function i(){var e,t,a,o=$("#search_input"),n=$(".search_result");o.focus((function(){$(".icon-search").css("color","#3199DB"),n.show()})),o.keyup((e=this.autoComplete,t=t||120,function(){var o=this,n=arguments,s=function(){e.apply(o,n)};clearTimeout(a),a=setTimeout(s,t)})),$(document).click((function(e){"search_input"!==e.target.id&&"search_result"!==e.target.className&&"search_item"!==e.target.className&&($(".icon-search").css("color","#CAD3DC"),n.hide())}))}$(".read-next-item section").each((function(){var e=$(this).height(),t=$(".read-next-item").height();$(this).css("margin-top",(t-e)/2+"px"),$(this).fadeIn()})),$(".read-next-item img").each((function(){!function(e,t){e.width(),t.width();var a=e.height(),o=t.height();if(a<o){e.css({width:"auto",height:"100%"});var n=(e.width()-t.width())/2;e.css("margin-left","-"+n+"px")}else{var s=(o-a)/2;e.css("margin-top",s+"px")}e.fadeIn()}($(this),$(".read-next-item"))})),function(){for(var e=parseInt($("#total_pages").val()),t=parseInt($("#current_pages").val()),a=$("#base_url").val(),o="",n=t-3;n<t;n++)n>0&&1!==n?o+='<a href="'+a+"page"+n+'" class="page-link page-num">'+n+"</a>":1===n&&(o+='<a href="'+a+'" class="page-link page-num">'+n+"</a>");o+='<span class="page-link page-num active">'+t+"</span>";for(var s=t+1;s<=t+3;s++)s<=e&&(o+='<a href="'+a+"page"+s+'" class="page-link page-num">'+s+"</a>");$("#page-link-container").html(o)}(),i.prototype.autoComplete=function(){var e=this.value.toLowerCase();e.length?$(".icon-search").css("color","#3199DB"):$(".icon-search").css("color","#CAD3DC"),$.getJSON("../../search.json").done((function(t){var a="";for(var o in t){var n=t[o],s=n.title,r=n.tags;n.url;""!==e&&(s+r).toLowerCase().indexOf(e)>=0&&(a+='<a class="search_item" href="'+n.url+'">'+n.title+"</a>")}$(".search_result").html(a)}))},new i,"true"===$("#nm-switch").val()&&(window.localStorage&&localStorage.setItem("theme","dark"),function(){var e=$("body"),t=(new Date).getHours(),a=$("#base_url").val();if("dark"===localStorage.getItem("sw-theme"))return e.addClass("night-mode"),void $(".theme-switch>i").css({background:"url("+a+"assets/icons/contrast-light.svg) no-repeat center","background-size":"100% 100%"});"light"!==localStorage.getItem("sw-theme")?(t<=6||t>=18)&&e.addClass("night-mode"):$(".theme-switch>i").css({background:"url("+a+"assets/icons/contrast-dark.svg) no-repeat center","background-size":"100% 100%"})}()),$(".post-content").on("mouseup",(function(e){var t,a=window.getSelection();a.toString().length>=30&&(t=a,t+="\n\n著作权归作者所有。\n商业转载请联系作者获得授权,非商业转载请注明出处。\n原文: "+location.href,$(".post-content").on("copy",(function(e){(window.clipboardData||e.originalEvent.clipboardData).setData("text/plain",t),e.preventDefault()})))})),function(){if(window.screen.width<767){var e=$(".theme-switch"),t=$(".theme-switch>i"),a=localStorage.getItem("sw-theme");"dark"===a?e.append("THEME LIGHT"):e.append("THEME DARK"),e.css({color:"#A5A8B0",padding:"16px 0","font-weight":"bold","font-size":"12px"}),t.hide()}}(),$(".theme-switch").on("click",(function(e){e.stopPropagation(),e.preventDefault(),"dark"===localStorage.getItem("sw-theme")?(window.localStorage&&localStorage.setItem("sw-theme","light"),console.log("sw-theme","to light"),location.reload()):"light"===localStorage.getItem("sw-theme")&&(window.localStorage&&localStorage.setItem("sw-theme","dark"),console.log("sw-theme","to dark"),location.reload())}))}));
$(document).ready((function(){var e=$(".g-nav");if($("#menu-toggle").on("click",(function(t){e.slideToggle(200),$(document).on("click",(function(){e.slideUp(200)})),t.stopPropagation()})),e.on("click",(function(e){e.stopPropagation()})),$(window).width()>695){var t=$(".g-header"),a=t.outerHeight(),o=$(".g-logo"),s=e.find("a"),n=$(".g-banner").attr("data-theme"),r=$(document).scrollTop(),c=$("#base_url").val();$(document).scroll((function(){var i=$(this).scrollTop(),l="nav-"+n;i>a?(i>3*a&&t.addClass("headerUp"),t.css({"background-color":"rgba(255, 255, 255, .98)","box-shadow":"0 1px 12px rgba(0, 0, 0, .08)"}),o.css({background:"url("+c+"/assets/icons/logo_"+n+".svg) no-repeat center","background-size":"100% 100%"}),s.css("color","#666"),e.addClass(l)):(t.removeClass("headerUp"),t.css({"background-color":"transparent","box-shadow":"none"}),o.css({background:"url("+c+"assets/icons/logo.svg) no-repeat center","background-size":"100% 100%"}),s.css("color","#fff"),e.removeClass(l)),r>i?t.addClass("headerDown"):t.removeClass("headerDown"),r=i}))}function i(){var e,t,a,o=$("#search_input"),s=$(".search_result");o.focus((function(){$(".icon-search").css("color","#3199DB"),s.show()})),o.keyup((e=this.autoComplete,t=t||120,function(){var o=this,s=arguments,n=function(){e.apply(o,s)};clearTimeout(a),a=setTimeout(n,t)})),$(document).click((function(e){"search_input"!==e.target.id&&"search_result"!==e.target.className&&"search_item"!==e.target.className&&($(".icon-search").css("color","#CAD3DC"),s.hide())}))}$(".read-next-item section").each((function(){var e=$(this).height(),t=$(".read-next-item").height();$(this).css("margin-top",(t-e)/2+"px"),$(this).fadeIn()})),$(".read-next-item img").each((function(){!function(e,t){e.width(),t.width();var a=e.height(),o=t.height();if(a<o){e.css({width:"auto",height:"100%"});var s=(e.width()-t.width())/2;e.css("margin-left","-"+s+"px")}else{var n=(o-a)/2;e.css("margin-top",n+"px")}e.fadeIn()}($(this),$(".read-next-item"))})),function(){for(var e=parseInt($("#total_pages").val()),t=parseInt($("#current_pages").val()),a=$("#base_url").val(),o="",s=t-3;s<t;s++)s>0&&1!==s?o+='<a href="'+a+"page"+s+'" class="page-link page-num">'+s+"</a>":1===s&&(o+='<a href="'+a+'" class="page-link page-num">'+s+"</a>");o+='<span class="page-link page-num active">'+t+"</span>";for(var n=t+1;n<=t+3;n++)n<=e&&(o+='<a href="'+a+"page"+n+'" class="page-link page-num">'+n+"</a>");$("#page-link-container").html(o)}(),i.prototype.autoComplete=function(){var e=this.value.toLowerCase();e.length?$(".icon-search").css("color","#3199DB"):$(".icon-search").css("color","#CAD3DC"),$.getJSON("../../search.json").done((function(t){var a="";for(var o in t){var s=t[o],n=s.title,r=s.tags;s.url;""!==e&&(n+r).toLowerCase().indexOf(e)>=0&&(a+='<a class="search_item" href="'+s.url+'">'+s.title+"</a>")}$(".search_result").html(a)}))},new i,"true"===$("#nm-switch").val()?(window.localStorage&&localStorage.setItem("theme","dark"),function(){if("light"!==localStorage.getItem("sw-theme")){var e=$("body"),t=(new Date).getHours();(t<=6||t>=18)&&e.addClass("night-mode")}}()):window.localStorage&&localStorage.setItem("theme","light"),$(".post-content").on("mouseup",(function(e){var t,a=window.getSelection();a.toString().length>=30&&(t=a,t+="\n\n著作权归作者所有。\n商业转载请联系作者获得授权,非商业转载请注明出处。\n原文: "+location.href,$(".post-content").on("copy",(function(e){(window.clipboardData||e.originalEvent.clipboardData).setData("text/plain",t),e.preventDefault()})))})),function(){var e=$("#base_url").val(),t=localStorage.getItem("theme"),a=localStorage.getItem("sw-theme");if(window.screen.width<767){var o=$(".theme-switch"),s=$(".theme-switch>i");"dark"===a?o.append("THEME LIGHT"):"light"===a||"dark"===t?o.append("THEME DARK"):"light"===t?o.append("THEME LIGHT"):o.append("THEME DARK"),o.css({color:"#A5A8B0",padding:"16px 0","font-weight":"bold","font-size":"12px"}),s.hide()}t!==a&&("dark"===a?$(".theme-switch>i").css({background:"url("+e+"assets/icons/contrast-light.svg) no-repeat center","background-size":"100% 100%"}):"light"===a?$(".theme-switch>i").css({background:"url("+e+"assets/icons/contrast-dark.svg) no-repeat center","background-size":"100% 100%"}):t&&("dark"===t?$(".theme-switch>i").css({background:"url("+e+"assets/icons/contrast-light.svg) no-repeat center","background-size":"100% 100%"}):"light"===t?$(".theme-switch>i").css({background:"url("+e+"assets/icons/contrast-dark.svg) no-repeat center","background-size":"100% 100%"}):$(".theme-switch>i").css({background:"url("+e+"assets/icons/contrast-light.svg) no-repeat center","background-size":"100% 100%"})))}(),$(".theme-switch").on("click",(function(e){e.stopPropagation(),e.preventDefault(),"dark"===localStorage.getItem("sw-theme")?(window.localStorage&&localStorage.setItem("sw-theme","light"),console.log("sw-theme","to light"),location.reload()):"light"===localStorage.getItem("sw-theme")&&(window.localStorage&&localStorage.setItem("sw-theme","dark"),console.log("sw-theme","to dark"),location.reload())}))}));